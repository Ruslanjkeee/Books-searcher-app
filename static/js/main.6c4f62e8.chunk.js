(this["webpackJsonpbooks-searcher-app"]=this["webpackJsonpbooks-searcher-app"]||[]).push([[0],{14:function(e,t,r){e.exports={wrapper:"Loader_wrapper__1QPVC",loader:"Loader_loader__dbOY1",loading:"Loader_loading__3DHlV"}},18:function(e,t,r){e.exports={myButton:"MyButton_myButton__2qzcA"}},19:function(e,t,r){e.exports={search_input:"MyInput_search_input__24nU0"}},20:function(e,t,r){e.exports={MySelect:"MySelect_MySelect__aN3VS"}},28:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(11),o=r.n(c),s=r(3),i=r.n(s),l=r(4),u=r(8),d=r(16),f=r(17),j=r(2);var h=new function(){return Object(j.d)({input:"",selectedCategory:"all",selectedSort:"relevance",setInput:function(e){this.input=e},setSelectedCategory:function(e){this.selectedCategory=e},setSelectedSort:function(e){this.selectedSort=e}})};var p=new function(){return Object(j.d)({bookInfo:{},bookId:"",showBookInfo:!1,setBookInfo:function(e){this.bookInfo=e},setBookId:function(e){this.bookId=e},setShowBookInfo:function(e){this.showBookInfo=e}})};var b=new function(){return Object(j.d)({cards:[],totalCards:0,startIndex:0,updateCards:function(e){this.cards=e},setTotalCards:function(e){this.totalCards=e},setStartIndex:function(e){this.startIndex=e}})},_="AIzaSyAN3icd9YJN7u0ksQQR619M8icQYgqodhc",v=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"getAll",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(h.input).concat("all"===h.selectedCategory?"":"+subject:"+h.selectedCategory,"&orderBy=").concat(h.selectedSort,"&startIndex=").concat(b.startIndex,"&maxResults=30&key=").concat(_));case 2:if(!((t=e.sent).status>=200&&t.status<=299)){e.next=9;break}return e.next=6,t.json();case 6:r=e.sent,e.next=10;break;case 9:throw Error(t.statusText);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(p.bookId,"?key=").concat(_));case 2:if(!((t=e.sent).status>=200&&t.status<=299)){e.next=9;break}return e.next=6,t.json();case 6:r=e.sent,e.next=10;break;case 9:throw Error(t.statusText);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),m=r(15),x=r(0),O=function(e){var t,r,a,n,c,o,s,i=e.card;(null===i||void 0===i?void 0:i.volumeInfo)&&(t=null===(c=i.volumeInfo.imageLinks)||void 0===c?void 0:c.smallThumbnail,r=null===(o=i.volumeInfo.categories)||void 0===o?void 0:o[0],a=i.volumeInfo.title,n=null===(s=i.volumeInfo.authors)||void 0===s?void 0:s.join(", "));return t||(t=""),n||(n=""),a||(a=""),r||(r=""),Object(x.jsxs)("div",{className:"card",id:i.id,children:[Object(x.jsx)("div",{className:"card_img-container",children:Object(x.jsx)("img",{src:t,alt:"book cover",className:"card_img"})}),Object(x.jsx)("p",{className:"card_category",children:r}),Object(x.jsx)("p",{className:"card_title",children:a}),Object(x.jsx)("p",{className:"card_autor",children:n})]})},k=n.a.memo(O),g=r(10),I=r(18),y=r.n(I),w=function(e){return Object(x.jsx)("button",Object(g.a)(Object(g.a)({},e),{},{className:y.a.myButton,children:e.children}))},C=r(14),N=r.n(C),S=function(){return Object(x.jsxs)("div",{className:N.a.wrapper,children:[Object(x.jsx)("p",{children:"Loading..."}),Object(x.jsx)("div",{className:N.a.loader})]})},B=r(5);var A=new function(){return Object(j.d)({isStartApp:!0,pagStep:30,setIsStartApp:function(e){this.isStartApp=e}})},E=function(e){var t=Object(a.useState)(!1),r=Object(u.a)(t,2),n=r[0],c=r[1],o=Object(a.useState)(""),s=Object(u.a)(o,2),d=s[0],f=s[1],j=function(){var t=Object(l.a)(i.a.mark((function t(){var r=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,e.apply(void 0,r);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),f(t.t0.message);case 9:return t.prev=9,c(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return[j,n,d]},M=function(e){return e.fetchError||e.fetchMoreError||e.fetchBookError?Object(x.jsxs)("h2",{className:"error",children:["Ooops, an error occured: ",e.fetchError||e.fetchMoreError||e.fetchBookError]}):null},T=Object(B.b)((function(e){var t=e.fetchError,r=E(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.setStartIndex(b.startIndex+A.pagStep),e.next=3,v.getAll();case 3:(t=e.sent).totalItems&&t.items&&(b.setTotalCards(t.totalItems),b.updateCards([].concat(Object(m.a)(b.cards),Object(m.a)(t.items))));case 5:case"end":return e.stop()}}),e)})))),n=Object(u.a)(r,3),c=n[0],o=n[1],s=n[2],d=Object(a.useCallback)((function(e){var t=e.target.closest(".card");t&&(p.setBookId(t.id),p.setShowBookInfo(!0))}),[]);return s||t?Object(x.jsx)(M,{fetchMoreError:s,fetchError:t}):Object(x.jsxs)("div",{className:"main",children:[Object(x.jsxs)("p",{className:"main_results",children:["Found ",b.totalCards," results"]}),b.cards.length>0&&Object(x.jsx)("div",{className:"cards",onClick:d,children:b.cards.map((function(e,t){return Object(x.jsx)(k,{card:e},e.id+t)}))}),o?Object(x.jsx)(S,{}):b.totalCards>b.startIndex+A.pagStep?Object(x.jsx)(w,{onClick:c,className:"load-cards",children:"Load more"}):null]})})),H=r(19),L=r.n(H),V=function(e){return Object(x.jsx)("input",Object(g.a)({className:L.a.search_input},e))},Q=r(20),z=r.n(Q),q=function(e){var t=e.options,r=e.defaultValue,a=e.value,n=e.onChange;return Object(x.jsxs)("select",{id:"categories",className:z.a.MySelect,value:a,onChange:function(e){return n(e.target.value)},children:[Object(x.jsx)("option",{value:r,children:r}),t.map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))]})},F=r(6),Y=r.n(F),D=Object(B.b)((function(e){var t=e.fetchBooks;function r(e){e&&e.preventDefault(),""!==h.input&&(t(),A.isStartApp&&A.setIsStartApp(!1))}return Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:Y.a.header_search,children:[Object(x.jsx)(V,{type:"text",value:h.input,onChange:function(e){return h.setInput(e.target.value)},placeholder:"type the book name",onKeyDown:function(e){"Enter"===e.key&&r()}}),Object(x.jsx)(w,{onClick:r,children:"Search the book"})]}),Object(x.jsxs)("div",{className:Y.a.header_filters,children:[Object(x.jsxs)("div",{className:Y.a.filters_category,children:[Object(x.jsx)("label",{htmlFor:"categories",className:Y.a.filters_name,children:"Categories"}),Object(x.jsx)(q,{value:h.selectedCategory,onChange:function(e){return h.setSelectedCategory(e)},defaultValue:"all",options:["art","biography","computers","history","medical","poetry"]})]}),Object(x.jsxs)("div",{className:Y.a.filters_sort,children:[Object(x.jsx)("label",{htmlFor:"sorting",className:Y.a.filters_name,children:"Sorting by"}),Object(x.jsx)(q,{value:h.selectedSort,onChange:function(e){return h.setSelectedSort(e)},defaultValue:"relevance",options:["newest"]})]})]})]})})),J=function(e){var t=e.fetchBooks;return Object(x.jsxs)("header",{className:Y.a.header,children:[Object(x.jsx)("h1",{className:Y.a.header_title,children:"Search for books"}),Object(x.jsx)(D,{fetchBooks:t})]})},U=n.a.memo(J),R=(r(28),r(7)),G=r.n(R),K=Object(B.b)((function(e){var t,r,n,c=E(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getById();case 2:t=e.sent,p.setBookInfo(t);case 4:case"end":return e.stop()}}),e)})))),o=Object(u.a)(c,3),s=o[0],d=o[1],f=o[2];Object(a.useEffect)((function(){s()}),[]);var j=p.bookInfo,h=null===j||void 0===j?void 0:j.volumeInfo,b=Object(a.useCallback)((function(e){p.setShowBookInfo(!1)}),[]),_=(null===h||void 0===h||null===(t=h.imageLinks)||void 0===t?void 0:t.thumbnail)||"",m=(null===h||void 0===h?void 0:h.description)||"There is no description",O=(null===h||void 0===h?void 0:h.title)||"",k=(null===h||void 0===h||null===(r=h.authors)||void 0===r?void 0:r.join(", "))||"",g=(null===h||void 0===h||null===(n=h.categories)||void 0===n?void 0:n.join(", "))||"";return f?Object(x.jsx)(M,{fetchBookError:f}):d?Object(x.jsx)(S,{}):Object(x.jsxs)("div",{className:G.a.card,children:[Object(x.jsx)("div",{className:G.a.card_img,children:Object(x.jsx)("img",{src:_,alt:"book",className:G.a.img})}),Object(x.jsxs)("div",{className:G.a.card_info,children:[Object(x.jsx)("p",{className:G.a.info_category,children:g}),Object(x.jsx)("p",{className:G.a.info_title,children:O}),Object(x.jsx)("p",{className:G.a.info_author,children:k}),Object(x.jsx)("p",{className:G.a.info_description,children:m})]}),Object(x.jsx)("button",{className:G.a.card_btn,onClick:b,children:"X"})]})}));var P=function(){var e=E(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.setStartIndex(0),p.setShowBookInfo(!1),e.next=4,v.getAll();case 4:t=e.sent,b.setTotalCards(t.totalItems),t.totalItems?b.updateCards(t.items):b.updateCards([]);case 7:case"end":return e.stop()}}),e)})))),t=Object(u.a)(e,3),r=t[0],a=t[1],n=t[2];return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(U,{fetchBooks:r}),Object(x.jsx)(B.a,{children:function(){return p.showBookInfo?Object(x.jsx)(K,{}):null}}),Object(x.jsx)(B.a,{children:function(){return a&&Object(x.jsx)(S,{})}}),Object(x.jsx)(B.a,{children:function(){return!p.showBookInfo&&!a&&!A.isStartApp&&Object(x.jsx)(T,{fetchError:n})}})]})};o.a.render(Object(x.jsx)(P,{}),document.getElementById("root"))},6:function(e,t,r){e.exports={header:"AppHeader_header__68jsa",header_title:"AppHeader_header_title__2U1TQ",header_search:"AppHeader_header_search__3mvkU",header_filters:"AppHeader_header_filters___cfYx",filters_category:"AppHeader_filters_category__1vuiT",filters_name:"AppHeader_filters_name__3j5T2",filters_sort:"AppHeader_filters_sort__2OMT9"}},7:function(e,t,r){e.exports={card:"CardInfo_card__3TIjv",card_img:"CardInfo_card_img__3zFg0",card_info:"CardInfo_card_info__1izzO",info_title:"CardInfo_info_title__3fVMI",info_author:"CardInfo_info_author__2Iq8v",info_category:"CardInfo_info_category__3IrcQ",info_description:"CardInfo_info_description__1e8G4",card_btn:"CardInfo_card_btn__4Zk0r"}}},[[29,1,2]]]);
//# sourceMappingURL=main.6c4f62e8.chunk.js.map