(this["webpackJsonpbooks-searcher-app"]=this["webpackJsonpbooks-searcher-app"]||[]).push([[0],{13:function(e,t,n){e.exports={wrapper:"Loader_wrapper__1QPVC",loader:"Loader_loader__dbOY1",loading:"Loader_loading__3DHlV"}},17:function(e,t,n){e.exports={myButton:"MyButton_myButton__2qzcA"}},18:function(e,t,n){e.exports={search_input:"MyInput_search_input__24nU0"}},19:function(e,t,n){e.exports={MySelect:"MySelect_MySelect__aN3VS"}},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(10),o=n.n(r),c=n(14),s=n(3),i=n.n(s),l=n(6),u=n(7),d=n(15),j=n(16),f=n(2);var b=new function(){return Object(f.d)({input:"",selectedCategory:"all",selectedSort:"relevance",setInput:function(e){this.input=e},setSelectedCategory:function(e){this.selectedCategory=e},setSelectedSort:function(e){this.selectedSort=e}})};var h=new function(){return Object(f.d)({bookInfo:{},bookId:"",showBookInfo:!1,setBookInfo:function(e){this.bookInfo=e},setBookId:function(e){this.bookId=e},setShowBookInfo:function(e){this.showBookInfo=e}})};var p=new function(){return Object(f.d)({cards:[],totalCards:0,startIndex:0,updateCards:function(e){this.cards=e},setTotalCards:function(e){this.totalCards=e},setStartIndex:function(e){this.startIndex=e}})},v="AIzaSyAN3icd9YJN7u0ksQQR619M8icQYgqodhc",m=function(){function e(){Object(d.a)(this,e)}return Object(j.a)(e,null,[{key:"getAll",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(b.input).concat("all"===b.selectedCategory?"":"+subject:"+b.selectedCategory,"&orderBy=").concat(b.selectedSort,"&startIndex=").concat(p.startIndex,"&maxResults=30&key=").concat(v));case 2:if(!((t=e.sent).status>=200&&t.status<=299)){e.next=9;break}return e.next=6,t.json();case 6:n=e.sent,e.next=10;break;case 9:throw Error(t.statusText);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(h.bookId,"?key=").concat(v));case 2:if(!((t=e.sent).status>=200&&t.status<=299)){e.next=9;break}return e.next=6,t.json();case 6:n=e.sent,e.next=10;break;case 9:throw Error(t.statusText);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),x=n(0),O=function(e){var t,n,a,r,o,c,s=e.card,i=null===(t=s.volumeInfo.imageLinks)||void 0===t?void 0:t.smallThumbnail,l=null===(n=s.volumeInfo)||void 0===n||null===(a=n.categories)||void 0===a?void 0:a[0],u=null===(r=s.volumeInfo)||void 0===r?void 0:r.title,d=null===(o=s.volumeInfo)||void 0===o||null===(c=o.authors)||void 0===c?void 0:c.join(", ");return i||(i=""),d||(d=""),u||(u=""),l||(l=""),Object(x.jsxs)("div",{className:"card",id:s.id,children:[Object(x.jsx)("div",{className:"card_img-container",children:Object(x.jsx)("img",{src:i,alt:"book cover",className:"card_img"})}),Object(x.jsx)("p",{className:"card_category",children:l}),Object(x.jsx)("p",{className:"card_title",children:u}),Object(x.jsx)("p",{className:"card_autor",children:d})]})},_=n(9),I=n(17),g=n.n(I),k=function(e){return Object(x.jsx)("button",Object(_.a)(Object(_.a)({},e),{},{className:g.a.myButton,children:e.children}))},y=n(13),w=n.n(y),N=function(){return Object(x.jsxs)("div",{className:w.a.wrapper,children:[Object(x.jsx)("p",{children:"Loading..."}),Object(x.jsx)("div",{className:w.a.loader})]})},S=n(4);var C=new function(){return Object(f.d)({isStartApp:!0,pagStep:30,setIsStartApp:function(e){this.isStartApp=e}})},B=Object(S.b)((function(e){var t=e.fetchBookById,n=e.loadMore,a=e.isLoading;return Object(x.jsxs)("div",{className:"main",children:[Object(x.jsxs)("p",{className:"main_results",children:["Found ",p.totalCards," results"]}),Object(x.jsx)("div",{className:"cards",onClick:function(e){var n=e.target.closest(".card");n&&(h.setBookId(n.id),h.setShowBookInfo(!0),t())},children:p.cards.map((function(e,t){return Object(x.jsx)(O,{card:e},e.id+t)}))}),a?Object(x.jsx)(N,{}):p.totalCards>p.startIndex+C.pagStep?Object(x.jsx)(k,{onClick:n,className:"load-cards",children:"Load more"}):""]})})),A=n(18),M=n.n(A),L=function(e){return Object(x.jsx)("input",Object(_.a)({className:M.a.search_input},e))},T=n(19),V=n.n(T),z=function(e){var t=e.options,n=e.defaultValue,a=e.value,r=e.onChange;return Object(x.jsxs)("select",{id:"categories",className:V.a.MySelect,value:a,onChange:function(e){return r(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:n}),t.map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))]})},Q=Object(S.b)((function(e){var t=e.fetchBooks;function n(e){e&&e.preventDefault(),b.input&&t(),C.isStartApp&&C.setIsStartApp(!1)}return Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"header_search",children:[Object(x.jsx)(L,{type:"text",value:b.input,onChange:function(e){return b.setInput(e.target.value)},placeholder:"type the book name",onKeyDown:function(e){"Enter"===e.key&&n()}}),Object(x.jsx)(k,{onClick:n,children:"Search the book"})]}),Object(x.jsxs)("div",{className:"header_filters",children:[Object(x.jsxs)("div",{className:"filters_category",children:[Object(x.jsx)("label",{htmlFor:"categories",className:"filters_name",children:"Categories"}),Object(x.jsx)(z,{value:b.selectedCategory,onChange:function(e){return b.setSelectedCategory(e)},defaultValue:"all",options:["art","biography","computers","history","medical","poetry"]})]}),Object(x.jsxs)("div",{className:"filters_sort",children:[Object(x.jsx)("label",{htmlFor:"sorting",className:"filters_name",children:"Sorting by"}),Object(x.jsx)(z,{value:b.selectedSort,onChange:function(e){return b.setSelectedSort(e)},defaultValue:"relevance",options:["newest"]})]})]})]})})),q=function(e){var t=e.fetchBooks;return Object(x.jsxs)("header",{className:"header",children:[Object(x.jsx)("h1",{className:"header_title",children:"Search for books"}),Object(x.jsx)(Q,{fetchBooks:t})]})},E=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),d=s[0],j=s[1],f=function(){var t=Object(l.a)(i.a.mark((function t(){var n=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o(!0),t.next=4,e.apply(void 0,n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),j(t.t0.message);case 9:return t.prev=9,o(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return[f,r,d]},F=(n(27),n(5)),D=n.n(F),J=Object(S.b)((function(e){var t,n,a,r,o,c,s,i,l=h.bookInfo;var u=(null===l||void 0===l||null===(t=l.volumeInfo)||void 0===t?void 0:t.description)||"There is no description",d=(null===l||void 0===l||null===(n=l.volumeInfo)||void 0===n?void 0:n.title)||"",j=(null===l||void 0===l||null===(a=l.volumeInfo)||void 0===a||null===(r=a.authors)||void 0===r?void 0:r.join(", "))||"",f=(null===l||void 0===l||null===(o=l.volumeInfo)||void 0===o||null===(c=o.categories)||void 0===c?void 0:c.join(", "))||"";return Object(x.jsxs)("div",{className:D.a.card,children:[Object(x.jsx)("div",{className:D.a.card_img,children:Object(x.jsx)("img",{src:null===l||void 0===l||null===(s=l.volumeInfo)||void 0===s||null===(i=s.imageLinks)||void 0===i?void 0:i.thumbnail,alt:"",className:D.a.img})}),Object(x.jsxs)("div",{className:D.a.card_info,children:[Object(x.jsx)("p",{className:D.a.info_category,children:f}),Object(x.jsx)("p",{className:D.a.info_title,children:d}),Object(x.jsx)("p",{className:D.a.info_author,children:j}),Object(x.jsx)("p",{className:D.a.info_description,children:u})]}),Object(x.jsx)("button",{className:D.a.card_btn,onClick:function(e){h.setShowBookInfo(!1)},children:"X"})]})}));var Y=function(){var e=E(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.setStartIndex(0),h.setShowBookInfo(!1),e.next=4,m.getAll();case 4:t=e.sent,p.setTotalCards(t.totalItems),t.totalItems?p.updateCards(t.items):p.updateCards([]);case 7:case"end":return e.stop()}}),e)})))),t=Object(u.a)(e,3),n=t[0],a=t[1],r=t[2],o=E(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.setStartIndex(p.startIndex+b.pagStep),e.next=3,m.getAll();case 3:(t=e.sent).totalItems&&p.updateCards([].concat(Object(c.a)(p.cards),Object(c.a)(t.items)));case 5:case"end":return e.stop()}}),e)})))),s=Object(u.a)(o,3),d=s[0],j=s[1],f=s[2],v=E(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getById();case 2:t=e.sent,h.setBookInfo(t);case 4:case"end":return e.stop()}}),e)})))),O=Object(u.a)(v,3),_=O[0],I=O[1],g=O[2];return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(q,{fetchBooks:n}),(r||f||g)&&Object(x.jsxs)("h2",{className:"error",children:["Ooops, an error occured: ",r||f||g]}),Object(x.jsx)(S.a,{children:function(){return h.showBookInfo?I?Object(x.jsx)(N,{}):Object(x.jsx)(J,{}):""}}),Object(x.jsx)(S.a,{children:function(){return a&&Object(x.jsx)(N,{})}}),Object(x.jsx)(S.a,{children:function(){return!h.showBookInfo&&!a&&!C.isStartApp&&Object(x.jsx)(B,{fetchBookById:_,loadMore:d,isLoading:j})}})]})};o.a.render(Object(x.jsx)(Y,{}),document.getElementById("root"))},5:function(e,t,n){e.exports={card:"CardInfo_card__3TIjv",card_img:"CardInfo_card_img__3zFg0",card_info:"CardInfo_card_info__1izzO",info_title:"CardInfo_info_title__3fVMI",info_author:"CardInfo_info_author__2Iq8v",info_category:"CardInfo_info_category__3IrcQ",info_description:"CardInfo_info_description__1e8G4",card_btn:"CardInfo_card_btn__4Zk0r"}}},[[28,1,2]]]);
//# sourceMappingURL=main.ac8a9f07.chunk.js.map